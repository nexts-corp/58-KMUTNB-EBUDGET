{{>header}}
<div role="main" class="main">
    <section class="page-top none-margin">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <ul class="breadcrumb">
                        <li class="active">ตัวชี้วัดคำรับรองการปฏิบัติงาน</li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h1 class="none-padding">รายงานผลการดำเนินงาน</h1>
                </div>
            </div>
        </div>
    </section>

    <hr class="tall dashboard">

    <div class="sort-source-wrapper"><!-- button action on header -->
        <div class="container">
            <ul class="nav nav-pills sort-source menu-top pull-right" data-sort-id="portfolio" data-option-key="filter">
                <li class="active">
                    <button class="btn btn-default back" style="display: none;"><i class="fa fa-angle-double-left"> ย้อนกลับ</i></button>
                </li>
            </ul>
        </div>
    </div><!-- end button action on header -->

    <div class="container">
        <div class="row">

            <div id="deptList">
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th class="text-center col-md-2">ประเภทส่วนงาน</th>
                            <th class="text-center col-md-5">คณะ / หน่วยงาน</th>
                            <th class="text-center col-md-3">สถานะ</th>
                            <th class="text-center col-md-2">เครื่องมือ</th>
                        </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
            <div id="panelHome" class="col-md-12" style="display: none;">
                <div class="row">
                    <div class="form-group">
                        <label class="col-md-3 control-label text-right" for="affKpiId">รอบ : </label>
                        <div class="col-md-6">
                            <select type="text" class="form-control input-sm" name="affKpiId" id="affKpiId"></select>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="tabs">
                            <ul id="tabMenu" class="nav nav-tabs">

                            </ul>
                            <div id="tabContent" class="tab-content">

                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div><!--  row  -->
    </div><!--  container  -->
</div><!-- main -->

{{>footer}}

<script type="text/javascript">
    var findNode = {};
    var listArr = {};

    $(function () {
        listsDepartment();

        $("button.back").unbind("click").click(function () {
            toggleShow("home");
        })
    });

    function listsDepartment(){
        var datas = callAjax("{{_context_path}}/api/affirmative/result/listsDepartment", "post", {}, "json");
        if (typeof datas !== "undefined" && datas !== null) {
            var html = '';
            $.each(datas["lists"], function(key, val){
                $.each(val["dept"], function(key2, val2){
                    html += '<tr>'
                            + '<td>'+val["actName"]+'</td>'
                            + '<td>'+val2["deptName"]+'</td>'
                            + '<td>-</td>'
                            + '<td>'
                                + '<button class="btn btn-primary tracking" data-id="'+val2["deptId"]+'"><i class="fa fa-pencil"></i> รายงานผล</button>'
                            + '</td>'
                        + '</tr>';
                });
            });

            $("#deptList table tbody").html(html);

            $("button.tracking").unbind().click(function(){
                var deptId = $(this).attr("data-id");
                window.location = "{{_context_path}}/api/affirmative/view/result/" + deptId;
            });
        }
    }



    function toggleShow(option){
        if(option == "home"){
            $("#panelHome").hide();
            $("#deptList").show();
        }
        else if(option == "form"){
            $("#deptList").hide();
            $("#panelHome").show();
        }
    }
</script>