{{> header}}

<div role="main" class="main" ng-app="report3D" ng-controller="mainController" data-ng-init="init()" style="display:none;">
    <section class="page-top none-margin">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <ul class="breadcrumb">
                        <li class="active">ระบบจัดทำรายงาน</li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h1 class="none-padding">รายงานการจัดทำงบประมาณเงินรายได้จากงบประมาณแผ่นดิน 3 มิติ</h1>
                </div>
            </div>
        </div>
    </section>

    <hr class="tall dashboard">


    <div class="sort-source-wrapper"><!-- button action on header -->
        <div class="container">
            <ul class="nav nav-pills sort-source menu-top pull-right" data-sort-id="portfolio" data-option-key="filter">
                <li class="active">
                    <button class="btn btn-default" ng-show="page != 'home'" ng-click="back('home')"><i class="fa fa-angle-double-left"> ย้อนกลับ</i></button>
                </li>
            </ul>
        </div>
    </div><!-- end button action on header -->

    <div class="container">
        <div ng-show="page == 'home'" class="row">
            <div id="divChoice" class="col-md-12">
                <section class="panel panel-featured panel-featured-success">
                    <div class="panel-heading">
                        <h2 class="panel-title"><i class="fa fa-file-o"></i> แบบฟอร์มการออกรายงาน </h2>
                    </div>
                    <div class="panel-body">
                        <div id="panel1">
                            <form id="formChoice" onsubmit="return false;">

                                <div class="form-group">
                                    <div class="col-md-12">
                                        <label class="col-md-2 control-label text-right req" for="budgetPeriodId">ชื่อรายงาน : </label>
                                        <div class="col-md-10" style="padding-left: 0px; padding-right: 0px;">
                                            <select id="reportName" ng-model="reportName"  name="reportName" ng-options="item.name for item in listReport | filter:{ type: reportType.id}" ng-init="reportName = listReport[0]" class="form-control input-md" required>
                                                <option value="">เลือก</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-12" ng-show="validReportName">
                                        <label class="col-md-12 control-label text-center text-danger req">กรุณาเลือกรายงาน</label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-md-6" style="padding: 0px;">
                                        <label class="col-md-4 control-label text-right req" for="budgetPeriodId">ปีงบประมาณ : </label>
                                        <div class="col-md-8">
                                            <select id="budgetPeriod" ng-model="budgetPeriodId" ng-change="checkShowTable();" name="budgetPeriodId" ng-options="item.year for item in listPeriod" ng-init="budgetPeriodId = ''" class="form-control input-sm" required>
                                                <option value="">เลือก</option>
                                            </select>
                                        </div>
                                        <div ng-show="budgetPeriodIdLoding"><i class="fa fa-spinner fa-spin"></i> Loading...</div>
                                        <div class="col-md-12" ng-show="validBudgetPeriod">
                                            <label class="col-md-12 control-label text-center text-danger req">กรุณาระบุปีงบประมาณ</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6" style="padding: 0px;">
                                        <label class="col-md-4 control-label text-right req" for="reportType">ประเภทแหล่งเงิน : </label>
                                        <div class="col-md-8">
                                            <select id="reportType" ng-model="reportType" ng-change="checkShowTable();changeTypeReport();" name="reportType" ng-options="item.name for item in listReportType"  ng-init="reportType = listReportType[0]" class="form-control input-sm" >
                                                <!--<option value="">เลือก</option>-->
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-md-6" style="padding: 0px;">
                                        <label class="col-md-4 control-label text-right req" for="facultyId">หน่วยงาน : </label>
                                        <div class="col-md-8">
                                            <select ng-show="!facultyIdLoading" id="faculty" ng-change="checkShowTable();getFilterDept(listDeptB, {masterId:facultyId.id})" ng-model="facultyId" name="facultyId"  ng-options="(item.id+' '+item.deptName) for item in listDeptA" class="form-control input-sm">
                                                <option value="">เลือก</option>
                                            </select>
                                            <div ng-show="facultyIdLoading"><i class="fa fa-spinner fa-spin"></i> Loading...</div>
                                        </div>
                                        <div class="col-md-12" ng-show="validFacultyId">
                                            <label class="col-md-12 control-label text-center text-danger req">กรุณาระบุหน่วยงาน</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6" style="padding: 0px;">
                                        <label class="col-md-4 control-label text-right req" for="deptId">สาขา/ภาควิชา : </label>
                                        <div class="col-md-8">
                                            <select ng-show="!deptIdLoading" id="dept" ng-change="checkShowTable();" ng-model="deptId" name="deptId" ng-options="(item.id+' '+item.deptName) for item in listDeptB | filter:{masterId:facultyId.id}"  class="form-control input-sm" >
                                                <option value="">ทั้งหมด</option>
                                                <!--<option  ng-repeat="item in listDeptB | filter:{ masterId: facultyId.id}">{[item.id +' '+item.deptName]}</option>-->
                                            </select>
                                            <div ng-show="deptIdLoading"><i class="fa fa-spinner fa-spin"></i> Loading...</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-md-6" style="padding: 0px;">
                                        <label class="col-md-4 control-label text-right req" for="l3dPlanId">แผนงาน : </label>
                                        <div class="col-md-8">
                                            <select ng-show="!l3dPlanIdLoading" ng-change="checkShowTable();" id="l3dplan" ng-model="l3dPlanId" name="l3dPlanId" ng-options="item.planName for item in listL3DPlan" ng-init="l3dPlanId = ''" class="form-control input-sm" >
                                                <option value="">ทั้งหมด</option>
                                            </select>
                                            <div ng-show="l3dPlanIdLoading"><i class="fa fa-spinner fa-spin"></i> Loading...</div>
                                        </div>
                                        <div ng-show="validPlan" class="col-md-12">
                                            <label class="col-md-12 control-label text-center text-danger req">กรุณาระบุแผนงานเดียว</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6 none-padding" style="padding: 0px;">
                                        <label class="col-md-4 control-label text-right req" for="l3dFundId">กองทุน : </label>
                                        <div class="col-md-8">
                                            <select ng-show="!l3dFundIdLoading" ng-change="checkShowTable();" id="l3dfund" ng-model="l3dFundId"  name="l3dFundId" ng-options="item.fundgroupName for item in listL3DFund"  class="form-control input-sm" required>
                                                <option value="">ทั้งหมด</option>
                                            </select>
                                            <div ng-show="l3dFundIdLoading"><i class="fa fa-spinner fa-spin"></i> Loading...</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6" style="padding: 0px;">
                                        <label class="col-md-4 control-label text-right req" for="status">ใช้ข้อมูล : </label>
                                        <div class="col-md-8">
                                            <select id="status" ng-model="status" name="status"  class="form-control input-sm" >
                                                <option value="BUDGET">ก่อนปิดยอดงบประมาณ</option>
                                                <option value="FINAL">หลังปิดยอดงบประมาณ</option>
                                            </select>
                                            <div ng-show="l3dPlanIdLoading"><i class="fa fa-spinner fa-spin"></i> Loading...</div>
                                        </div>
                                    </div>
                                    <div ng-show="isShowCatId" class="col-md-6" style="padding: 0px;">
                                        <label class="col-md-4 control-label text-right req" for="status">รายรับจาก : </label>
                                        <div class="col-md-8">
                                            <select id="catID" ng-model="catID" name="catID"  class="form-control input-sm" >
                                                <option value="E">รายรับจากค่าบำรุงการศึกษา ค่าลงทะเบียนเรียนและค่าธรรมเนียมประเภทต่างๆ</option>
                                                <option value="S">รายรับจากงานบริการวิชาการ</option>
                                            </select>
                                            <div ng-show="l3dPlanIdLoading"><i class="fa fa-spinner fa-spin"></i> Loading...</div>
                                        </div>
                                    </div>
                                </div>

                            </form>

                        </div>
                    </div>
                </section>
            </div>
            <div class="col-md-12 text-right">
                <button  class="btn btn-default" ng-click="export('pdfview',reportName)" title="PDF"><i class="fa fa-file-pdf-o"></i> PDF</button>
                <button  class="btn btn-default" ng-click="export('excel',reportName)" title="EXCEL"><i class="fa fa-file-excel-o"></i> EXCEL</button>
                <button  class="btn btn-default" ng-click="export('word',reportName)" title="WORD"><i class="fa fa-file-word-o"></i> WORD</button>
            </div>
            <!--<div class="col-md-12">-->
                <!--<div id="bidderTable" class="col-md-12">&lt;!&ndash; table shown bidder information list &ndash;&gt;-->
                    <!--<table class="table table-bordered table-striped table-condensed mb-none" id="table">-->
                        <!--<thead>-->
                        <!--<tr>-->
                            <!--<th class="text-center col-lg-1">ลำดับ</th>-->
                            <!--<th class="text-center col-lg-8">รายงาน</th>-->
                            <!--<th class="text-center col-lg-3">ประเภทไฟล์</th>-->
                        <!--</tr>-->
                        <!--</thead>-->
                        <!--<tbody>-->
                        <!--<tr ng-show="!showTable"><td colspan="3" class="text-center" style="background-color: #f9f9f9">กรุณาเลือกข้อมูลให้ครบ</td></tr>-->
                        <!--<tr ng-show="showTable" ng-repeat="item in listReport | filter:{ type: reportType.id}">-->
                            <!--<td class="text-center">{[$index+1]}</td>-->
                            <!--<td>{[item.name]}</td>-->
                            <!--<td class="text-center">-->
                                <!--<button  class="btn btn-default" ng-click="export('pdfview',item)" title="PDF"><i class="fa fa-file-pdf-o"></i> PDF</button>-->
                                <!--<button  class="btn btn-default" ng-click="export('excel',item)" title="EXCEL"><i class="fa fa-file-excel-o"></i> EXCEL</button>-->
                                <!--<button  class="btn btn-default" ng-click="export('word',item)" title="WORD"><i class="fa fa-file-word-o"></i> WORD</button>-->
                            <!--</td>-->
                        <!--</tr>-->
                        <!--</tbody>-->
                    <!--</table>-->
                <!--</div>&lt;!&ndash; end table shown bidder information list &ndash;&gt;-->
            <!--</div>-->
        </div><!--  container  -->
    </div><!-- main -->

    {{> footer}}
    <script src="{{_context_path}}/apps/report/views/report3D/js/report3D.js"></script>